<!DOCTYPE html>
<html>
  <head>
    <title>Chess</title>
  </head>
  <body>
    <canvas id="myCanvas" height="850px" width="850px"></canvas>
    <div style="width: 850px; display: flex; justify-content: center;">
      <div onclick="draw()" style="background-color: lightblue; width: 150px; height: 50px; text-align: center; vertical-align: middle;">Hello</div>
      <div onclick="CreateCheckBoard()" style="background-color: lightgreen; width: 150px; height: 50px; text-align: center; vertical-align: middle;">Bye</div>
    </div>
    <script>
      // MODEL

      let boardSquare = []
      // {
      //   localId, //a1, a2, a3... h8
      //   localX,
      //   licalY
      // };

      // fills array 'boardSquare' with objects contining ID and location of square
      function giveId(i, a, incrI, incrA) {
        localId = '' + letters[i] + numbers[a];
        localX = 25+incrI;
        localY = 25+incrA;
        boardSquare.push({
          localId,
          localX,
          localY
        });
      }

      // VISUAL

      const canvas = document.getElementById('myCanvas');
      canvas.style.backgroundColor = 'rgb(148, 106, 62)';

      const ctx = canvas.getContext('2d');

      function draw() { // not yet working 
        console.log('hi');
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        
        // CreateCheckBoard();
      }
      // setInterval(draw, 1000);

      function CreateCheckBoard() {
        let isBlack = true;
        let localId;
        let localX;
        let localY;

        const letters = ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h'];
        const numbers = [1, 2, 3, 4, 5, 6, 7, 8];
        // draws checkboard
        for (let a = 0; a < 8; a++) {
          const incrA = a * 100;

            ctx.fillStyle = 'black'
            ctx.font = '25px Arial';
            ctx.fillText (letters[a],68+incrA, 20);
            ctx.fillText (numbers[a],5, 80+incrA);

          for (let i = 0; i < 8; i++) {
            const incrI = i * 100;
            
            if (isBlack) {
              ctx.fillStyle = 'rgb(94, 57, 19)'
            } else {
              ctx.fillStyle = 'rgb(209, 173, 90)'
            }          

            ctx.fillRect (25+incrI, 25+incrA, 100, 100);
            // Gives Id's
            giveId(i, a, incrI, incrA);            
            isBlack = !isBlack;
          }
        isBlack = !isBlack;  
        }
      }

      CreateCheckBoard();

      // CALCULATION

      // on click sends cursor's location to function 
      canvas.addEventListener('click', (e) => {
        findSquare(e.offsetX, e.offsetY)
      })
        //finds clicked square
      function findSquare(clickX, clickY) {
        boardSquare.forEach(element => {
          if (clickX > element.localX && clickX < (element.localX+100) && clickY > element.localY && clickY < (element.localY+100)) {
            console.log(element.localId);
          }
        });
      }
    </script>
  </body>
</html>